"use strict";

let core = require("./core");
let load = core.load;

console.log(`Basis v${core.version}`);
console.log(`Loading dependencies`);

let gulp = load("gulp");
let browserSync = load("browser-sync").create();

core.browserSync = browserSync;

for (let module of core.modules) {
	require("./" + module);
}

gulp.task("once", () => {
	core.flags.once = true;

	return gulp.start(core.buildTasks);
});

gulp.task("production", () => {
	core.flags.production = true;
	core.flags.once = true;

	return gulp.start(core.buildTasks);
});

gulp.task("default", () => {
	if (core.conf.proxy) {
		browserSync.init({
			proxy: core.conf.proxy
		});
	}

	return gulp.start(core.buildTasks);
});